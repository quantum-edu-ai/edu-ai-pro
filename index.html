<!DOCTYPE html>
<html lang="tr">
<head>
    <meta name="google-site-verification" content="H7EHIpr_a9c4v60r0YzU-j-c1aVVFcHxLmDaXGTJ_LQ" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EDU AI PRO - 7. SÄ±nÄ±f</title>
    <style>
        :root { --p: #1e3a8a; --s: #3b82f6; --acc: #ef4444; --bg: #f1f5f9; --suc: #22c55e; --war: #f59e0b; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); margin: 0; padding: 20px; display: flex; justify-content: center; }
        .card { background: white; width: 100%; max-width: 900px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); overflow: hidden; }
        .header { background: linear-gradient(135deg, var(--p), var(--s)); color: white; padding: 20px; text-align: center; }
        #toast-container { position: fixed; top: 20px; right: 20px; z-index: 9999; }
        .toast { padding: 15px 25px; border-radius: 10px; color: white; margin-bottom: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.2); animation: slideIn 0.5s ease forwards; font-weight: bold; }
        @keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        .toast.success { background: var(--suc); }
        .toast.error { background: var(--acc); }
        .stats { display: flex; justify-content: space-around; align-items: center; background: #fff; padding: 15px; border-bottom: 3px solid #e2e8f0; font-weight: bold; }
        .rozet-box { background: #fef3c7; padding: 5px 15px; border-radius: 20px; border: 1px solid #f59e0b; color: #b45309; font-size: 18px; }
        .content { padding: 25px; min-height: 500px; }
        .btn { display: block; width: 100%; padding: 15px; margin: 10px 0; border: 2px solid #cbd5e1; border-radius: 10px; background: white; color: var(--p); font-size: 17px; font-weight: bold; cursor: pointer; text-align: left; transition: 0.2s; }
        .btn:hover { background: #eff6ff; border-color: var(--s); }
        .opt-btn { display: block; width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ddd; border-radius: 8px; cursor: pointer; text-align: left; background: #fff; font-size: 16px; }
        .hidden { display: none !important; }
        .badge { background: var(--acc); color: white; padding: 2px 8px; border-radius: 10px; font-size: 12px; float: right; margin-left: 5px; }
        .summary-box { background: #e0f2fe; padding: 20px; border-radius: 10px; margin-bottom: 15px; border-left: 5px solid var(--s); }
        .wrong-item { background: #fff1f2; border: 1px solid #fecaca; padding: 15px; margin-bottom: 10px; border-radius: 8px; }
        .auth-container { max-width: 400px; margin: 50px auto; padding: 20px; border: 1px solid #ddd; border-radius: 10px; }
        .auth-input { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; }
        .auth-switch { text-align: center; margin-top: 15px; cursor: pointer; color: var(--s); text-decoration: underline; }
        
        /* Yeni Ä°pucu Stilleri */
        .hint-btn { background: var(--war); color: white; border: none; padding: 8px 15px; border-radius: 8px; cursor: pointer; font-weight: bold; margin-top: 10px; display: block; }
        .hint-box { background: #fffbeb; border: 1px solid #fde68a; color: #92400e; padding: 15px; border-radius: 8px; margin-top: 10px; font-style: italic; display: none; }
    </style>
</head>
<body>

<div id="toast-container"></div>

<div class="card">
    <div class="header"><h1>ğŸ“ EDU AI PRO</h1></div>

    <div id="auth-screen" class="content">
        <div class="auth-container">
            <h2 id="auth-title" style="text-align:center;">GiriÅŸ Yap</h2>
            <input type="text" id="auth-user" class="auth-input" placeholder="KullanÄ±cÄ± AdÄ±">
            <input type="password" id="auth-pass" class="auth-input" placeholder="Åifre">
            <button class="btn" style="text-align:center; background: var(--p); color: white;" onclick="handleAuth()" id="auth-btn">GiriÅŸ Yap</button>
            <div class="auth-switch" onclick="toggleAuth()" id="auth-toggle">HesabÄ±n yok mu? KayÄ±t Ol</div>
        </div>
    </div>

    <div id="main-panel" class="hidden">
        <div class="stats">
            <span>ğŸ’ XP: <span id="xp">0</span></span>
            <div class="rozet-box">ğŸ† Rozetler: <span id="rz">0</span></div>
            <span>ğŸ–ï¸ Seviye: <span id="lvl">1</span></span>
        </div>

        <div id="m-menu" class="content">
            <h3 id="welcome-msg">HoÅŸ Geldin!</h3>
            <button class="btn" onclick="showLessons()">ğŸ“š Dersler</button>
            <button class="btn" style="background: #fef3c7; border-color: #f59e0b;" onclick="startChallenge()">âš¡ Challenge Modu (Karma 10 Soru)</button>
            <button class="btn" style="color: #1e3a8a; border-color: #1e3a8a;" onclick="openMissing()">ğŸš¨ Eksik OlduÄŸun Konular <span id="m-count" class="badge">0</span></button>
            <button class="btn" style="background: #fee2e2; border-color: var(--acc); color: var(--acc);" onclick="openWrongList()">âŒ YanlÄ±ÅŸ Sorular <span id="w-count" class="badge">0</span></button>
            <button class="btn" style="margin-top:20px; background:#6c757d; color:white; border:none; text-align:center;" onclick="logout()">Ã‡Ä±kÄ±ÅŸ Yap</button>
        </div>

        <div id="lesson-menu" class="content hidden">
            <button onclick="showMain()" class="btn" style="width:auto; padding:5px 15px;">â¬… Geri</button>
            <button class="btn" onclick="openLesson('Matematik')">ğŸ“ Matematik</button>
            <button class="btn" onclick="openLesson('Fen')">ğŸ”¬ Fen Bilimleri</button>
            <button class="btn" onclick="openLesson('Turkce')">ğŸ“– TÃ¼rkÃ§e</button>
            <button class="btn" onclick="openLesson('Sosyal')">ğŸŒ Sosyal Bilgiler</button>
        </div>

        <div id="topic-menu" class="content hidden">
            <button onclick="showLessons()" class="btn" style="width:auto; padding:8px 15px;">â¬… Geri</button>
            <h2 id="l-title"></h2>
            <div id="t-list"></div>
        </div>

        <div id="check-screen" class="content hidden">
            <h2 id="check-name"></h2>
            <p style="font-size: 18px;">Bu konuyu anladÄ±n mÄ±?</p>
            <button class="btn" style="background: #dcfce7;" onclick="startQuizDirect()">âœ… Evet, AnladÄ±m</button>
            <button class="btn" style="background: #fee2e2;" onclick="showSummary()">âŒ HayÄ±r, AnlamadÄ±m</button>
        </div>

        <div id="summary-screen" class="content hidden">
            <h2 id="sum-title">Ã–zet</h2>
            <div id="sum-text" class="summary-box"></div>
            <button class="btn" style="background: var(--p); color: white;" onclick="startQuizDirect()">Teste BaÅŸla</button>
        </div>

        <div id="wrong-panel" class="content hidden">
            <button onclick="showMain()" class="btn" style="width:auto; padding:8px 15px;">â¬… Geri</button>
            <h2>âŒ YanlÄ±ÅŸlarÄ±n</h2>
            <div id="wrong-list-area"></div>
        </div>

        <div id="q-area" class="content hidden">
            <h3 id="q-title"></h3>
            <p id="q-text" style="font-size: 20px; font-weight: bold;"></p>
            <div id="opts"></div>
            <button id="hint-btn" class="hint-btn" onclick="showHint()">ğŸ’¡ Ä°pucu Al (-5 XP)</button>
            <div id="hint-box" class="hint-box"></div>
        </div>
    </div>
</div>

<script>
    let isLoginMode = true;
    let users = JSON.parse(localStorage.getItem('eduUsers')) || {};
    let xp = 0, rozet = 0;
    let curL = "", curT = null, curQI = 0, isChallenge = false;
    let hintUsed = false; // Ä°pucu takibi
    let missingTopics = new Set();
    let wrongList = [];

    const data = {
        'Matematik': [
            {n:"Tam SayÄ±larla Ä°ÅŸlemler", sum:"Toplama, Ã§Ä±karma, Ã§arpma ve bÃ¶lme.", q:[{t:"(-5) + (+2)?", a:"-7", b:"-3", c:"3", d:"7", dgr:"B", h:"ZÄ±t iÅŸaretlilerde bÃ¼yÃ¼kten kÃ¼Ã§Ã¼ÄŸÃ¼ Ã§Ä±kar, bÃ¼yÃ¼ÄŸÃ¼n iÅŸaretini koy."}, {t:"(-3) x (-4)?", a:"12", b:"-12", c:"7", d:"-7", dgr:"A", h:"Eksi ile eksinin Ã§arpÄ±mÄ± artÄ±dÄ±r."}, {t:"(-10)/2?", a:"5", b:"-5", c:"2", d:"-2", dgr:"B", h:"ZÄ±t iÅŸaretli sayÄ±larÄ±n bÃ¶lÃ¼mÃ¼ negatiftir."}, {t:"0/5 kaÃ§tÄ±r?", a:"0", b:"TanÄ±msÄ±z", c:"5", d:"1", dgr:"A", h:"SÄ±fÄ±rÄ±n bir sayÄ±ya bÃ¶lÃ¼mÃ¼ her zaman sÄ±fÄ±rdÄ±r."}, {t:"En kÃ¼Ã§Ã¼k pozitif tam sayÄ±?", a:"0", b:"1", c:"-1", d:"2", dgr:"B", h:"Pozitif sayÄ±lar 1'den baÅŸlar."}]},
            {n:"Rasyonel SayÄ±lar", sum:"a/b ÅŸeklindeki sayÄ±lar.", q:[{t:"1/2 ondalÄ±k?", a:"0,2", b:"0,5", c:"0,12", d:"1,2", dgr:"B", h:"PaydayÄ± 10 yapacak ÅŸekilde geniÅŸlet."}, {t:"Payda 0 olabilir mi?", a:"Evet", b:"HayÄ±r", c:"Bazen", d:"Belki", dgr:"B", h:"Payda 0 olursa ifade tanÄ±msÄ±z olur."}, {t:"-3 rasyonel midir?", a:"Evet", b:"HayÄ±r", c:"Sadece tam sayÄ±dÄ±r", d:"Belirsiz", dgr:"A", h:"Her tam sayÄ±nÄ±n altÄ±nda gizli bir 1 paydasÄ± vardÄ±r."}, {t:"Hangisi bÃ¼yÃ¼ktÃ¼r?", a:"1/2", b:"1/4", c:"1/8", d:"1/10", dgr:"A", h:"Paylar eÅŸitse paydasÄ± kÃ¼Ã§Ã¼k olan daha bÃ¼yÃ¼ktÃ¼r."}, {t:"3/4 payÄ± kaÃ§tÄ±r?", a:"3", b:"4", c:"7", d:"1", dgr:"A", h:"Ãœstteki sayÄ± pay, alttaki sayÄ± paydadÄ±r."}]},
            {n:"Rasyonel Ä°ÅŸlemler", sum:"Payda eÅŸitlemeyi unutma.", q:[{t:"1/2 + 1/2?", a:"1/4", b:"1", c:"2/2", d:"B ve C", dgr:"D", h:"YarÄ±m artÄ± yarÄ±m bir bÃ¼tÃ¼n eder."}, {t:"1/3 x 1/2?", a:"2/3", b:"1/6", c:"1/5", d:"1", dgr:"B", h:"Paylar Ã§arpÄ±lÄ±p paya, paydalar Ã§arpÄ±lÄ±p paydaya yazÄ±lÄ±r."}, {t:"ZÄ±t iÅŸaretli Ã§arpÄ±mÄ±?", a:"Pozitif", b:"Negatif", c:"SÄ±fÄ±r", d:"1", dgr:"B", h:"Dostumun dÃ¼ÅŸmanÄ± dÃ¼ÅŸmanÄ±mdÄ±r kuralÄ±nÄ± hatÄ±rla."}, {t:"0,2 x 5?", a:"1", b:"0,10", c:"0,5", d:"5", dgr:"A", h:"2/10 ile 5'i Ã§arpmayÄ± dene."}, {t:"1 - 1/2?", a:"1/2", b:"0", c:"2", d:"-1/2", dgr:"A", h:"BÃ¼tÃ¼nden yarÄ±m Ã§Ä±karsa ne kalÄ±r?"}]},
            {n:"Denklemler", sum:"x'i yalnÄ±z bÄ±rak.", q:[{t:"x-2=5 ise x?", a:"3", b:"7", c:"10", d:"5", dgr:"B", h:"-2 karÅŸÄ±ya +2 olarak geÃ§er."}, {t:"2x=10 ise x?", a:"2", b:"5", c:"20", d:"12", dgr:"B", h:"Her iki tarafÄ± da x'in katsayÄ±sÄ±na bÃ¶l."}, {t:"x+1=0?", a:"1", b:"-1", c:"0", d:"2", dgr:"B", h:"Hangi sayÄ±ya 1 eklersek 0 olur?"}, {t:"x/3=3?", a:"1", b:"9", c:"6", d:"0", dgr:"B", h:"BÃ¶lÃ¼ durumundaki 3 karÅŸÄ±ya Ã§arpÄ± olarak geÃ§er."}, {t:"5x=0?", a:"0", b:"5", c:"1", d:"-5", dgr:"A", h:"Ã‡arpÄ±mÄ± 0 yapan tek sayÄ± nedir?"}]}
        ],
        'Fen': [
            {n:"Uzay AraÅŸtÄ±rmalarÄ±", sum:"Teleskop ve uydular.", q:[{t:"GÃ¼neÅŸ bir yÄ±ldÄ±z mÄ±dÄ±r?", a:"Evet", b:"HayÄ±r", c:"Gezegendir", d:"Uydudur", dgr:"A", h:"GÃ¼neÅŸ, DÃ¼nya'ya en yakÄ±n yÄ±ldÄ±zdÄ±r."}, {t:"Ä°lk uydu?", a:"Sputnik", b:"Apollo", c:"TÃ¼rksat", d:"Bilsat", dgr:"A", h:"RuslarÄ±n 1957'de gÃ¶nderdiÄŸi uydudur."}, {t:"Ay'a ilk ayak basan?", a:"Gagarin", b:"Armstrong", c:"Newton", d:"Tesla", dgr:"B", h:"KÃ¼Ã§Ã¼k bir adÄ±m ama insanlÄ±k iÃ§in bÃ¼yÃ¼k bir adÄ±m demiÅŸti."}, {t:"Teleskop kim buldu?", a:"Lippershey/Galileo", b:"Edison", c:"Bell", d:"Da Vinci", dgr:"A", h:"GÃ¶kyÃ¼zÃ¼nÃ¼ ilk inceleyenlerden biri Galileo'dur."}, {t:"KÄ±zÄ±l gezegen?", a:"Mars", b:"VenÃ¼s", c:"MerkÃ¼r", d:"Ay", dgr:"A", h:"Demir oksit yÃ¼zÃ¼nden kÄ±rmÄ±zÄ± gÃ¶rÃ¼nÃ¼r."}]},
            {n:"HÃ¼cre", sum:"CanlÄ±nÄ±n en kÃ¼Ã§Ã¼k birimi.", q:[{t:"Bitki hÃ¼cresi ÅŸekli?", a:"Yuvarlak", b:"KÃ¶ÅŸeli", c:"YÄ±ldÄ±z", d:"DÃ¼z", dgr:"B", h:"HÃ¼cre duvarÄ± olduÄŸu iÃ§in daha sert ve ÅŸekillidir."}, {t:"HÃ¼cre yÃ¶netimi?", a:"Koful", b:"Ã‡ekirdek", c:"Zar", d:"Golgi", dgr:"B", h:"HÃ¼crenin beyni burasÄ±dÄ±r."}, {t:"Enerji santrali?", a:"Mitokondri", b:"Ribozom", c:"Zar", d:"Ã‡eper", dgr:"A", h:"ATP Ã¼retiminin yapÄ±ldÄ±ÄŸÄ± yerdir."}, {t:"Protein fabrikasÄ±?", a:"Ribozom", b:"Lizozom", c:"Zar", d:"Koful", dgr:"A", h:"TÃ¼m hÃ¼crelerde bulunan en kÃ¼Ã§Ã¼k organeldir."}, {t:"HÃ¼cre duvarÄ± kimde var?", a:"Hayvan", b:"Bitki", c:"Ä°nsan", d:"Sperm", dgr:"B", h:"Hayvanlarda bulunmaz, koruyucu dÄ±ÅŸ katmandÄ±r."}]},
            {n:"Mitoz", sum:"OnarÄ±m ve bÃ¼yÃ¼me.", q:[{t:"Kromozom sayÄ±sÄ±?", a:"YarÄ±", b:"AynÄ±", c:"Ã‡ift", d:"DÃ¶rt", dgr:"B", h:"KalÄ±tsal Ã¶zelliklerin deÄŸiÅŸmediÄŸi bÃ¶lÃ¼nme tÃ¼rÃ¼dÃ¼r."}, {t:"KaÃ§ hÃ¼cre oluÅŸur?", a:"1", b:"2", c:"4", d:"8", dgr:"B", h:"Bir hÃ¼cre ikiye bÃ¶lÃ¼nÃ¼r."}, {t:"Nerede gÃ¶rÃ¼lÃ¼r?", a:"Ãœreme", b:"VÃ¼cut", c:"Yumurta", d:"Deri", dgr:"B", h:"YaralarÄ±n iyileÅŸmesi ve bÃ¼yÃ¼me iÃ§in gereklidir."}, {t:"HazÄ±rlÄ±k evresi?", a:"Ä°nterfaz", b:"Anafaz", c:"Telofaz", d:"Son", dgr:"A", h:"BÃ¶lÃ¼nme baÅŸlamadan Ã¶nceki evredir."}, {t:"Mitoz sonucu Ã§eÅŸitlilik?", a:"Var", b:"Yok", c:"Bazen", d:"Belki", dgr:"B", h:"Ana hÃ¼crenin tÄ±patÄ±p aynÄ±sÄ± oluÅŸur."}]},
            {n:"Mayoz", sum:"Ãœreme iÃ§in.", q:[{t:"Kromozom?", a:"YarÄ±", b:"AynÄ±", c:"Ã‡ift", d:"ÃœÃ§", dgr:"A", h:"TÃ¼r iÃ§i kromozom sayÄ±sÄ±nÄ±n sabit kalmasÄ±nÄ± saÄŸlar."}, {t:"KaÃ§ hÃ¼cre?", a:"2", b:"4", c:"1", d:"0", dgr:"B", h:"Mayoz 1 ve Mayoz 2 sonunda toplam sayÄ± budur."}, {t:"Ã‡eÅŸitlilik?", a:"Yok", b:"Var (ParÃ§a deÄŸiÅŸimi)", c:"Bilinmez", d:"Az", dgr:"B", h:"ParÃ§a deÄŸiÅŸimi (crossing-over) sayesinde olur."}, {t:"Nerede?", a:"Deri", b:"Ãœreme ana", c:"Kas", d:"Kemik", dgr:"B", h:"Sadece Ã¼reme hÃ¼crelerini oluÅŸturmak iÃ§indir."}, {t:"DÃ¶llenme sonrasÄ±?", a:"Zigot", b:"Embriyo", c:"HÃ¼cre", d:"Bebek", dgr:"A", h:"Yumurta ve spermin birleÅŸmiÅŸ halidir."}]}
        ],
        'Turkce': [
            {n:"Fiil Anlam", sum:"Ä°ÅŸ, oluÅŸ, durum.", q:[{t:"KoÅŸmak?", a:"Ä°ÅŸ", b:"Durum", c:"OluÅŸ", d:"SÄ±fat", dgr:"B", h:"Neyi/Kimi sorularÄ±na cevap vermez, hareket bildirir."}, {t:"Sararmak?", a:"Ä°ÅŸ", b:"Durum", c:"OluÅŸ", d:"Zaman", dgr:"C", h:"Zamanla kendiliÄŸinden olan deÄŸiÅŸimdir."}, {t:"Okumak?", a:"Ä°ÅŸ", b:"Durum", c:"OluÅŸ", d:"Zarf", dgr:"A", h:"Neyi okumak? sorusuna cevap verir."}, {t:"Uzanmak?", a:"Ä°ÅŸ", b:"Durum", c:"OluÅŸ", d:"Ek", dgr:"B", h:"O anki pozisyonu bildirir."}, {t:"YaÅŸlanmak?", a:"Ä°ÅŸ", b:"OluÅŸ", c:"Durum", d:"Kip", dgr:"B", h:"KendiliÄŸinden olan bir sÃ¼reÃ§tir."}]},
            {n:"Fiil Kipleri", sum:"Haber ve Dilek.", q:[{t:"-yor eki?", a:"Gelecek", b:"Åimdiki", c:"GeÃ§miÅŸ", d:"GeniÅŸ", dgr:"B", h:"Eylem ÅŸu an yapÄ±lÄ±yor."}, {t:"-meli eki?", a:"Ä°stek", b:"Gereklilik", c:"Åart", d:"Emir", dgr:"B", h:"YapÄ±lmasÄ± zorunlu olan durumlar."}, {t:"Gelecek zaman?", a:"-ecek", b:"-miÅŸ", c:"-di", d:"-r", dgr:"A", h:"HenÃ¼z yapÄ±lmamÄ±ÅŸ ama yapÄ±lacak eylem."}, {t:"Emir kipi eki?", a:"Yok", b:"-e", c:"-se", d:"-malÄ±", dgr:"A", h:"Bu kipin Ã¶zel bir eki yoktur."}, {t:"-se/sa?", a:"Haber", b:"Åart", c:"Ä°stek", d:"Emir", dgr:"B", h:"Eylemin gerÃ§ekleÅŸmesi bir koÅŸula baÄŸlÄ±dÄ±r."}]},
            {n:"Ek Fiil", sum:"Ä°simleri yÃ¼klem yapar.", q:[{t:"Ä°sim yÃ¼klemse?", a:"Fiil", b:"Ek-fiil", c:"SÄ±fat", d:"Zamir", dgr:"B", h:"Ä°sim soylu sÃ¶zcÃ¼kleri yÃ¼klem yapan ek."}, {t:"KaÃ§ gÃ¶revi var?", a:"2", b:"1", c:"3", d:"4", dgr:"A", h:"Ä°simleri yÃ¼klem yapmak ve birleÅŸik zamanlÄ± fiil yapmak."}, {t:"-idi eki?", a:"Hikaye", b:"Rivayet", c:"Åart", d:"GeniÅŸ", dgr:"A", h:"GÃ¶rÃ¼len geÃ§miÅŸ zamanÄ±n ek fiilidir."}, {t:"GeliyormuÅŸ?", a:"-idi", b:"-imiÅŸ", c:"-ise", d:"-dir", dgr:"B", h:"BaÅŸkalarÄ±ndan duyulan bir durumdur."}, {t:"Zengindir?", a:"Ek fiil", b:"Normal fiil", c:"Ä°sim", d:"Zarf", dgr:"A", h:"GeniÅŸ zamanÄ±n ek fiilidir."}]},
            {n:"Anlam KaymasÄ±", sum:"Zaman uyumsuzluÄŸu.", q:[{t:"YarÄ±n geliyoruz?", a:"Kayma var", b:"Yok", c:"Hata", d:"SÄ±fat", dgr:"A", h:"Zaman eki -yor ama anlam gelecek zamandÄ±r."}, {t:"HergÃ¼n yer?", a:"Kayma", b:"Uyumlu", c:"Ä°sim", d:"Ek", dgr:"B", h:"Her gÃ¼n geniÅŸ zaman bildirir."}, {t:"DÃ¼n gelir?", a:"Kayma", b:"Yok", c:"Bilinmez", d:"Zarf", dgr:"A", h:"GeÃ§miÅŸten bahsedilirken geniÅŸ zaman eki kullanÄ±lmÄ±ÅŸ."}, {t:"Hoca biner?", a:"Zaman kaymasÄ±", b:"Normal", c:"Hata", d:"SÄ±fat", dgr:"A", h:"MasalsÄ± anlatÄ±mlarda geniÅŸ zaman kullanÄ±mÄ±dÄ±r."}, {t:"Åimdi Ã§Ä±kar?", a:"Kayma", b:"Normal", c:"Hata", d:"Ek", dgr:"A", h:"Åu an olandan bahsederken geniÅŸ zaman kullanÄ±lmÄ±ÅŸ."}]}
        ],
        'Sosyal': [
            {n:"Ä°letiÅŸim", sum:"Ben dili ve empati.", q:[{t:"Ben dili hangisidir?", a:"Sen suÃ§lusun", b:"ÃœzÃ¼lÃ¼yorum", c:"Git buradan", d:"Bakma", dgr:"B", h:"Kendi duygu ve dÃ¼ÅŸÃ¼ncelerini karÅŸÄ±yÄ± suÃ§lamadan anlatmaktÄ±r."}, {t:"Jest/Mimik?", a:"SÃ¶zlÃ¼", b:"SÃ¶zsÃ¼z", c:"YazÄ±lÄ±", d:"Hata", dgr:"B", h:"Beden dili ile yapÄ±lan iletiÅŸimdir."}, {t:"Ä°letiÅŸim kaÃ§a ayrÄ±lÄ±r?", a:"3", b:"2", c:"1", d:"5", dgr:"A", h:"SÃ¶zlÃ¼, sÃ¶zsÃ¼z ve yazÄ±lÄ± olarak ayrÄ±lÄ±r."}, {t:"Ã–nyargÄ±?", a:"Olumlu", b:"Olumsuz", c:"NÃ¶tr", d:"Ä°yi", dgr:"B", h:"Bir kiÅŸi hakkÄ±nda Ã¶nceden verilmiÅŸ genelde negatif karardÄ±r."}, {t:"Etkin dinleme?", a:"GÃ¶z temasÄ±", b:"Uyumak", c:"KaÃ§mak", d:"BaÄŸÄ±rmak", dgr:"A", h:"KarÅŸÄ±daki kiÅŸiyi anladÄ±ÄŸÄ±nÄ± hissettirmektir."}]},
            {n:"NÃ¼fus", sum:"NÃ¼fus faktÃ¶rleri.", q:[{t:"DoÄŸal faktÃ¶r?", a:"Sanayi", b:"Ä°klim", c:"TarÄ±m", d:"Ticaret", dgr:"B", h:"Ä°nsanÄ±n etkisi olmadan doÄŸada var olan durumdur."}, {t:"NÃ¼fus artÄ±ÅŸÄ±?", a:"DoÄŸum", b:"Ã–lÃ¼m", c:"GÃ¶Ã§", d:"Hepsi", dgr:"D", h:"Hem doÄŸal hem de yapay (gÃ¶Ã§ gibi) sebepleri dÃ¼ÅŸÃ¼n."}, {t:"En yoÄŸun bÃ¶lge?", a:"Marmara", b:"DoÄŸu Anadolu", c:"Ä°Ã§ Anadolu", d:"Karadeniz", dgr:"A", h:"Sanayi ve ulaÅŸÄ±mÄ±n en geliÅŸtiÄŸi yerdir."}, {t:"BeÅŸeri?", a:"UlaÅŸÄ±m", b:"Su", c:"Yer ÅŸekli", d:"Toprak", dgr:"A", h:"Ä°nsan eliyle oluÅŸturulan faktÃ¶rdÃ¼r."}, {t:"TÃœÄ°K?", a:"NÃ¼fus", b:"SaÄŸlÄ±k", c:"EÄŸitim", d:"Spor", dgr:"A", h:"TÃ¼rkiye Ä°statistik Kurumu'nun kÄ±saltmasÄ±dÄ±r."}]},
            {n:"KuruluÅŸ", sum:"1299.", q:[{t:"OsmanlÄ± kurucu?", a:"Osman Bey", b:"ErtuÄŸrul", c:"Orhan", d:"Fatih", dgr:"A", h:"Devlete adÄ±nÄ± veren kiÅŸidir."}, {t:"BaÅŸkent?", a:"Bursa", b:"SÃ¶ÄŸÃ¼t", c:"Edirne", d:"Hepsi", dgr:"D", h:"OsmanlÄ± farklÄ± zamanlarda bu yerlerin hepsini merkez yaptÄ±."}, {t:"Ä°lk ordu?", a:"Yaya/MÃ¼sellem", b:"YeniÃ§eri", c:"Sipahi", d:"Donanma", dgr:"A", h:"Orhan Bey dÃ¶neminde kurulan dÃ¼zenli birliklerdir."}, {t:"Ä°skan?", a:"SavaÅŸ", b:"YerleÅŸtirme", c:"Vergi", d:"GÃ¶Ã§", dgr:"B", h:"Fethedilen yerlere TÃ¼rk ailelerin yerleÅŸtirilmesidir."}, {t:"Boyumuz?", a:"KayÄ±", b:"KÄ±nÄ±k", c:"Ã‡epni", d:"AvÅŸar", dgr:"A", h:"Ä°ki ok ve bir yay sembolÃ¼ vardÄ±r."}]},
            {n:"Fetih", sum:"Fatih dÃ¶nemi.", q:[{t:"Ä°stanbul?", a:"1453", b:"1071", c:"1299", d:"1923", dgr:"A", h:"Orta Ã‡aÄŸ'Ä± kapatÄ±p Yeni Ã‡aÄŸ'Ä± aÃ§an olaydÄ±r."}, {t:"Fatih?", a:"2. Mehmet", b:"1. Mehmet", c:"2. Murat", d:"Yavuz", dgr:"A", h:"7 dil bilen entelektÃ¼el padiÅŸah."}, {t:"Preveze?", a:"Barbaros", b:"Piri Reis", c:"Turgut", d:"Fatih", dgr:"A", h:"Akdeniz'in TÃ¼rk gÃ¶lÃ¼ haline geldiÄŸi zaferdir."}, {t:"Halife?", a:"Yavuz", b:"Fatih", c:"Kanuni", d:"Murat", dgr:"B", h:"MÄ±sÄ±r seferinden sonra bu unvan alÄ±nmÄ±ÅŸtÄ±r."}, {t:"Donanma?", a:"Deniz", b:"Kara", c:"Hava", d:"Uzak", dgr:"A", h:"Gemi ve deniz askerlerinin tamamÄ±dÄ±r."}]}
        ]
    };

    function handleAuth() {
        const u = document.getElementById('auth-user').value.trim();
        const p = document.getElementById('auth-pass').value.trim();
        if(!u || !p) { showToast("Doldur!", "error"); return; }
        if(isLoginMode) {
            if(users[u] && users[u] === p) { showToast("GiriÅŸ!", "success"); loginSuccess(u); }
            else { showToast("Hata!", "error"); }
        } else {
            if(users[u]) { showToast("Var!", "error"); }
            else { users[u] = p; localStorage.setItem('eduUsers', JSON.stringify(users)); showToast("KayÄ±t!", "success"); toggleAuth(); }
        }
    }

    function toggleAuth() {
        isLoginMode = !isLoginMode;
        document.getElementById('auth-title').innerText = isLoginMode ? "GiriÅŸ Yap" : "KayÄ±t Ol";
        document.getElementById('auth-btn').innerText = isLoginMode ? "GiriÅŸ" : "KayÄ±t";
        document.getElementById('auth-toggle').innerText = isLoginMode ? "KayÄ±t Ol" : "GiriÅŸ Yap";
    }

    function loginSuccess(u) {
        document.getElementById('auth-screen').classList.add('hidden');
        document.getElementById('main-panel').classList.remove('hidden');
        document.getElementById('welcome-msg').innerText = "Merhaba, " + u;
        updateStats();
    }

    function logout() { location.reload(); }

    function showMain() { hideAll(); document.getElementById('m-menu').classList.remove('hidden'); }
    function showLessons() { hideAll(); document.getElementById('lesson-menu').classList.remove('hidden'); }
    function hideAll() { 
        document.getElementById('m-menu').classList.add('hidden');
        document.getElementById('lesson-menu').classList.add('hidden');
        document.getElementById('topic-menu').classList.add('hidden');
        document.getElementById('check-screen').classList.add('hidden');
        document.getElementById('summary-screen').classList.add('hidden');
        document.getElementById('wrong-panel').classList.add('hidden');
        document.getElementById('q-area').classList.add('hidden');
    }

    function openLesson(l) {
        curL = l; hideAll();
        document.getElementById('topic-menu').classList.remove('hidden');
        document.getElementById('l-title').innerText = l;
        const list = document.getElementById('t-list'); list.innerHTML = "";
        data[l].forEach((t, i) => { list.innerHTML += `<button class="btn" onclick="askStatus('${l}', ${i})">${t.n}</button>`; });
    }

    function askStatus(l, i) {
        curL = l; curT = data[l][i]; isChallenge = false; hideAll();
        document.getElementById('check-screen').classList.remove('hidden');
        document.getElementById('check-name').innerText = curT.n;
    }

    function showSummary() {
        hideAll(); document.getElementById('summary-screen').classList.remove('hidden');
        document.getElementById('sum-text').innerText = curT.sum;
    }

    function startQuizDirect() { curQI = 0; hideAll(); document.getElementById('q-area').classList.remove('hidden'); loadQuestion(); }

    function loadQuestion() {
        hintUsed = false; // Her soruda ipucu kullanÄ±mÄ±nÄ± sÄ±fÄ±rla
        document.getElementById('hint-box').style.display = 'none'; // Kutuyu gizle
        document.getElementById('hint-btn').style.display = 'block'; // Butonu gÃ¶ster
        
        let q = curT.q[curQI];
        document.getElementById('q-title').innerText = curT.n + " - " + (curQI+1);
        document.getElementById('q-text').innerText = q.t;
        const box = document.getElementById('opts'); box.innerHTML = "";
        ['a','b','c','d'].forEach(o => { box.innerHTML += `<button class="opt-btn" onclick="checkAnswer('${o.toUpperCase()}')">${o.toUpperCase()}) ${q[o]}</button>`; });
    }

    function showHint() {
        hintUsed = true;
        const box = document.getElementById('hint-box');
        box.innerText = curT.q[curQI].h || "Bu soru iÃ§in ipucu yok.";
        box.style.display = 'block';
        document.getElementById('hint-btn').style.display = 'none'; // Ä°pucu alÄ±nÄ±nca butonu sakla
    }

    function checkAnswer(ans) {
        let q = curT.q[curQI];
        if(ans === q.dgr) { 
            let p = hintUsed ? 5 : 10; // Ä°pucu kullanÄ±ldÄ±ysa 5, kullanÄ±lmadÄ±ysa 10 XP
            xp += p; 
            showToast(`ğŸ¯ DoÄŸru! (+${p} XP)`, "success"); 
        }
        else {
            showToast(`âŒ YanlÄ±ÅŸ! DoÄŸru: ${q.dgr}`, "error");
            wrongList.push({t: q.t, d: q.dgr, topic: curT.n});
            if(!isChallenge) {
                missingTopics.add(JSON.stringify({l: curL, n: curT.n}));
            }
        }
        curQI++;
        setTimeout(() => {
            if(curQI < curT.q.length) { loadQuestion(); }
            else { rozet++; showToast("ğŸ† Bitti!", "success"); updateStats(); showMain(); }
        }, 600);
    }

    function openWrongList() {
        hideAll(); document.getElementById('wrong-panel').classList.remove('hidden');
        const area = document.getElementById('wrong-list-area');
        area.innerHTML = wrongList.length === 0 ? "HarikasÄ±n!" : "";
        wrongList.forEach(w => { area.innerHTML += `<div class="wrong-item"><b>[${w.topic}]</b> ${w.t}<br>âœ… DoÄŸru: ${w.d}</div>`; });
    }

    function openMissing() {
        hideAll(); document.getElementById('topic-menu').classList.remove('hidden');
        document.getElementById('l-title').innerText = "Eksik KonularÄ±n";
        const list = document.getElementById('t-list'); list.innerHTML = "";
        if(missingTopics.size === 0) list.innerHTML = "EksiÄŸin yok!";
        missingTopics.forEach(s => {
            let it = JSON.parse(s);
            list.innerHTML += `<button class="btn" onclick="askStatus('${it.l}', ${data[it.l].findIndex(x=>x.n===it.n)})">${it.l}: ${it.n}</button>`;
        });
    }

    function startChallenge() {
        isChallenge = true;
        let allQ = [];
        Object.keys(data).forEach(l => data[l].forEach(t => t.q.forEach(q => allQ.push({q:q, n:t.n}))));
        let shuf = allQ.sort(() => 0.5 - Math.random()).slice(0, 10);
        curT = {n: "Challenge", q: shuf.map(x => x.q)};
        startQuizDirect();
    }

    function showToast(m, t) {
        const c = document.getElementById('toast-container');
        const d = document.createElement('div');
        d.className = `toast ${t === 'success' ? 'success' : 'error'}`;
        d.innerText = m; c.appendChild(d);
        setTimeout(() => { d.style.opacity = '0'; setTimeout(() => d.remove(), 500); }, 2000);
    }

    function updateStats() {
        document.getElementById('xp').innerText = xp;
        document.getElementById('lvl').innerText = Math.floor(xp/200) + 1;
        document.getElementById('rz').innerText = rozet;
        document.getElementById('w-count').innerText = wrongList.length;
        document.getElementById('m-count').innerText = missingTopics.size;
    }
</script>
</body>

</html>

